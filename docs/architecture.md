# Архитектура системы

## 1. Модули
- **UI слой**: `app/ui.py`
- **Сервисный слой**: `app/services.py`
- **Слой доступа к данным**: `app/database.py`
- **Безопасность/авторизация**: `app/auth.py`

Такое разделение позволяет заменить UI (например, на PyQt) без переписывания бизнес-логики.

## 2. Модель данных (ER)

Основные сущности:
- `users` — пользователи и роли
- `students` — студенты
- `rooms` — комнаты
- `stays` — история заселений/выселений
- `charges` — начисления
- `payments` — оплаты

Связи:
- `students 1:N stays`
- `rooms 1:N stays`
- `students 1:N charges`
- `students 1:N payments`

## 3. Безопасность
- Пароли не хранятся в открытом виде (SHA-256).
- Роли ограничивают доступ к вкладкам интерфейса.
- Включены внешние ключи SQLite (`PRAGMA foreign_keys = ON`).

## 4. Масштабирование
- Для перехода на PostgreSQL/MySQL достаточно заменить слой `database.py` и SQL-запросы.
- Для сетевой версии можно вынести сервисный слой в REST API.
- Для соответствия ФЗ-152 рекомендуется:
  - шифрование бэкапов,
  - ограничение доступа к рабочим станциям,
  - протоколирование действий пользователей.
